<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Poppins", sans-serif;
      }
    </style>
  </head>
  <body>
    <div class="container my-5">
      <h1>Clientes</h1>
      <a href="/add" class="btn btn-primary mb-3">Adicionar Cliente</a>
      <table class="table table-striped">
        <thead>
          <tr>
            <th>Nome</th>
            <th>Idade</th>
            <th>Ações</th>
          </tr>
        </thead>
        <tbody>
          <% result.forEach((customer) => { %>
          <tr>
            <td><%= customer.name %></td>
            <td><%= customer.age %></td>
            <td>
              <a
                href="/edit/<%= customer._id %>"
                class="btn btn-warning btn-sm"
              >
                <i class="bi bi-pencil"></i> Editar
              </a>
              <button
                onclick="confirmDelete('<%= customer._id %>')"
                class="btn btn-danger btn-sm"
              >
                <i class="bi bi-trash"></i> Excluir
              </button>
            </td>
          </tr>
          <% }); %>
        </tbody>
      </table>
    </div>

    <script>
      function confirmDelete(id) {
        if (confirm("Você tem certeza que deseja excluir este cliente?")) {
          fetch(`/delete/${id}`, { method: "DELETE" })
            .then((response) => response.json())
            .then(() => location.reload());
        }
      }
    </script>
  </body>
</html>
